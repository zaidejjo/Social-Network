{% extends "network/layout.html" %}
{% load static %}

{% block content %}

<h2>{{profile_user.username}}</h2>

<p>Followers: {{followers_count}} Following: {{following_count}}</p>

{% if request.user != profile_user %}
<form id="follow-form" action="{% url 'toggle_follow' profile_user.username %}"method="post"
>
    {% csrf_token %}
    {% if is_following %}
    <button type="submit" name="unfollow" class="btn btn-secondary">Unfollow</button>
    {% else %}
    <button type="submit" name="follow" class="btn btn-primary">Follow</button>
    {% endif %}
</form>
{% endif %}

<hr />

<h3>Posts</h3>
{% for post in posts %}
<div class="card mb-3">
    <div class="card-body">
        <p>{{post.content}}</p>
        <small class="text-muted">{{post.timestamp}}</small>
        <hr />
    </div>
</div>
{% empty %}
<p>No posts to display.</p>
{% endfor %}

<!-- Pagination -->

<nav>
    <ul class="pagination">
        {% if posts.has_previous %}
        <li class="page-item">
            <a href="?page={{posts.previous_page_number}}" class="page-link">Previous</a>
        </li>
        {% endif %}
        <li class="page-item disabled">
            <a class="page-link">Page {{ posts.number }} of {{ posts.paginator.num_pages }}</a>
        </li>
        {% if posts.has_next %}
        <li class="page-item disabled">
            <a href="?page={{posts.next_page_number}}" class="page-link">Next</a>
        </li>
        {% endif %}
    </ul>
</nav>
{% endblock %}